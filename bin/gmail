#!/bin/bash

RED=$(tput bold)$(tput setaf 1)
GREEN=$(tput bold)$(tput setaf 2)
YELLOW=$(tput bold)$(tput setaf 3)
BLUE=$(tput bold)$(tput setaf 4)
PINK=$(tput bold)$(tput setaf 5)
CYAN=$(tput bold)$(tput setaf 6)
NORMAL=$(tput sgr0)

passwords=( $( cat ~/.gmail ) )

function get {
  echo "${RED}$1${NORMAL}"
  curl -u $1:$2 --silent "https://mail.google.com/mail/feed/atom" | perl -ne 'print "\t" if /<name>/; print "'${GREEN}'$2'${NORMAL}'\n" if /<(title|name)>(.*)<\/\1>/;'
}

get ${passwords[0]} ${passwords[1]}
get ${passwords[2]} ${passwords[3]}
