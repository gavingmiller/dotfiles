#!/bin/bash

RED=$(tput bold)$(tput setaf 1)
NORMAL=$(tput sgr0)

passwords=( $( cat ~/.gmail ) )

function get {
  echo "${RED}$1"
  printf %${#1}s |tr " " "="
  echo "${NORMAL}"
  curl -u $1:$2 --silent "https://mail.google.com/mail/feed/atom" | \
    perl ~/bin/gmail-parse.pl | \
    sed "s/&#39;/'/g" | \
    sed "s/&lt;/</g" | \
    sed "s/&gt;/>/g" | \
    sed "s/&amp;/\&/g"
}

# Clear the screen
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;
echo;echo;echo;echo;echo;echo;echo;echo;

get ${passwords[0]} ${passwords[1]}
echo
echo "-------------------------------"
echo
get ${passwords[2]} ${passwords[3]}
